import{a as f}from"./chunk-XMYFCG4W.js";import{B as h,C as d,E as r,F as o,H as I,I as C,J as u,L as y,M as s,N as l,Q as U,T as E,U as b,V as A,ba as F,da as w,k as x,o as p,p as v,s as S,t as _,x as a,y as g}from"./chunk-37CQUT2T.js";function j(t,e){t&1&&(r(0,"div"),s(1,"you should log in first!"),o())}function D(t,e){if(t&1){let m=I();r(0,"tr")(1,"td"),s(2),o(),r(3,"td"),s(4),o(),r(5,"td"),s(6),o(),r(7,"td"),s(8),o(),r(9,"td")(10,"input",3),C("change",function(){let n=S(m).$implicit,c=u(2);return _(c.onChange(n.id))}),o()()()}if(t&2){let m=e.$implicit,i=u(2);a(2),l(m.surname),a(2),l(m.name),a(2),l(m.patronymic?m.patronymic:"-"),a(2),l(m.username),a(2),d("checked",m.isAdmin)("disabled",!i.loggedInUser)("disabled",!(i.loggedInUser!=null&&i.loggedInUser.isAdmin))}}function O(t,e){if(t&1&&(r(0,"table")(1,"thead")(2,"th"),s(3,"Surname"),o(),r(4,"th"),s(5,"Name"),o(),r(6,"th"),s(7,"Patronymic"),o(),r(8,"th"),s(9,"Username"),o(),r(10,"th"),s(11,"IsAdmin"),o()(),r(12,"tbody"),h(13,D,11,7,"tr",2),o()()),t&2){let m=u();a(13),d("ngForOf",m.users)}}var T=(()=>{let e=class e{constructor(i,n){this.authService=i,this.userService=n}ngOnInit(){this.authService.user$.subscribe(i=>{this.loggedInUser=i,console.log(i),this.loggedInUser&&this.userService.getAllUsers().subscribe(n=>{this.users=n})})}onChange(i){this.userService.getUser(i).subscribe(n=>{let c=n;delete c.clients,c.isAdmin=!c.isAdmin,this.userService.updateUser(i,c).subscribe()})}};e.\u0275fac=function(n){return new(n||e)(g(w),g(f))},e.\u0275cmp=p({type:e,selectors:[["app-users"]],decls:3,vars:2,consts:[["elseBlock",""],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["type","checkbox",3,"change","checked","disabled"]],template:function(n,c){if(n&1&&h(0,j,2,0,"div",1)(1,O,14,1,"ng-template",null,0,U),n&2){let N=y(2);d("ngIf",!c.loggedInUser)("ngIfElse",N)}},dependencies:[E,b],encapsulation:2});let t=e;return t})();var k=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=p({type:e,selectors:[["app-user"]],decls:0,vars:0,template:function(n,c){},encapsulation:2});let t=e;return t})();var V=[{path:"users",component:T},{path:"user",component:k}],L=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=v({type:e}),e.\u0275inj=x({providers:[f],imports:[F.forChild(V),A]});let t=e;return t})();export{L as UserModule};
