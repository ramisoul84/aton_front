import{a as f}from"./chunk-WJNUAZPN.js";import{B as h,C as p,E as r,F as o,H as C,I,J as u,L as y,M as s,N as l,Q as U,T as b,U as E,V as M,ba as w,da as A,k as x,o as d,p as v,s as _,t as S,x as c,y as g}from"./chunk-RQ4T6MHR.js";function N(t,e){t&1&&(r(0,"div"),s(1,"you should log in first!"),o())}function j(t,e){if(t&1){let m=C();r(0,"tr")(1,"td"),s(2),o(),r(3,"td"),s(4),o(),r(5,"td"),s(6),o(),r(7,"td"),s(8),o(),r(9,"td")(10,"input",3),I("change",function(){let n=_(m).$implicit,a=u(2);return S(a.onChange(n.id))}),o()()()}if(t&2){let m=e.$implicit,i=u(2);c(2),l(m.surname),c(2),l(m.name),c(2),l(m.patronymic?m.patronymic:"-"),c(2),l(m.username),c(2),p("checked",m.isAdmin)("disabled",!i.loggedInUser)("disabled",!(i.loggedInUser!=null&&i.loggedInUser.isAdmin))}}function D(t,e){if(t&1&&(r(0,"table")(1,"thead")(2,"th"),s(3,"Surname"),o(),r(4,"th"),s(5,"Name"),o(),r(6,"th"),s(7,"Patronymic"),o(),r(8,"th"),s(9,"Username"),o(),r(10,"th"),s(11,"IsAdmin"),o()(),r(12,"tbody"),h(13,j,11,7,"tr",2),o()()),t&2){let m=u();c(13),p("ngForOf",m.users)}}var O=(()=>{let e=class e{constructor(i,n){this.authService=i,this.userService=n}ngOnInit(){this.authService.user$.subscribe(i=>{this.loggedInUser=i,this.loggedInUser&&this.userService.getAllUsers().subscribe(n=>{this.users=n})})}onChange(i){this.userService.getUser(i).subscribe(n=>{let a=n;delete a.clients,a.isAdmin=!a.isAdmin,this.userService.updateUser(i,a).subscribe()})}};e.\u0275fac=function(n){return new(n||e)(g(A),g(f))},e.\u0275cmp=d({type:e,selectors:[["app-users"]],decls:3,vars:2,consts:[["elseBlock",""],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["type","checkbox",3,"change","checked","disabled"]],template:function(n,a){if(n&1&&h(0,N,2,0,"div",1)(1,D,14,1,"ng-template",null,0,U),n&2){let k=y(2);p("ngIf",!a.loggedInUser)("ngIfElse",k)}},dependencies:[b,E],styles:["@media screen and (max-width: 600px){th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:.6rem}table[_ngcontent-%COMP%]{margin:0;padding:0}}"]});let t=e;return t})();var T=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=d({type:e,selectors:[["app-user"]],decls:0,vars:0,template:function(n,a){},encapsulation:2});let t=e;return t})();var P=[{path:"users",component:O},{path:"user",component:T}],L=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=v({type:e}),e.\u0275inj=x({providers:[f],imports:[w.forChild(P),M]});let t=e;return t})();export{L as UserModule};
